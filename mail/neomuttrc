# Sort by threads
set sort = threads
# Sort threads by last date recieved - newest first
set sort_aux = reverse-last-date-received
# Show date in year/month/day hour:minute format
set date_format="%y/%m/%d %I:%M%p"
set index_format="%4C %-15.15g %Z %{%b %d} %-15.15L (%?l?%4l&%4c?) %s"
color index_tag red white "unread"
color index_date green default


# Mailcap file is used to tell mutt how to open different types of file
set mailcap_path = "~/.mutt/mailcap"
bind  attach  <return>  view-mailcap
alternative_order multipart/mixed text/calendar application/ics text/html text/plain

unauto_view *
auto_view text/html


######################
#  NotMuch Settings  #
######################
# All the notmuch settings are documented here: https://neomutt.org/feature/notmuch

# Points to the notmuch directory
# set nm_default_url = "notmuch://$HOME/.mail/work"
# Makes notmuch return threads rather than messages
set nm_query_type = "threads"
# Binding for notmuch search
set nm_default_uri = "notmuch:///Users/pmichail/.mail"

set nm_default_uri="notmuch:///Users/pmichail/.mail" # path to the maildir
set sendmail="/PATH/TO/bin/nm_sendmail"            # enables parsing of outgoing mail
set virtual_spoolfile = yes
virtual-mailboxes \
    "Gmail: To me"   "notmuch://?query=tag:to-me and folder:/gmail/"\
    "Gmail: Sent"   "notmuch://?query=tag:sent and folder:/gmail/"\
    "TD: To me"   "notmuch://?query=tag:to-me and folder:/talentdesk/"\
    "TD: Sent"      "notmuch://?query=tag:sent and folder:/talentdesk/"        # sets up queries for virtual folders

# notmuch bindings
    macro index \\\\ "<vfolder-from-query>"              # looks up a hand made query
    macro index A "<modify-labels>+archive -unread -inbox\\n"        # tag as Archived
    macro index I "<modify-labels>-inbox -unread\\n"                 # removed from inbox
    macro index S "<modify-labels-then-hide>-inbox -unread +junk\\n" # tag as Junk mail
    macro index + "<modify-labels>+*\\n<sync-mailbox>"               # tag as starred
    macro index - "<modify-labels>-*\\n<sync-mailbox>"               # tag as unstarred

 # sidebar
set sidebar_width   = 22
set sidebar_visible = yes               # set to "no" to disable sidebar view at startup
color sidebar_new yellow default
set sidebar_short_path = yes
set sidebar_next_new_wrap = yes
set mail_check_stats
set sidebar_format = '%D%?F? [%F]?%* %?N?%N/? %?S?%S?'


# sidebar bindings
bind index <left> sidebar-prev          # got to previous folder in sidebar
bind index <right> sidebar-next         # got to next folder in sidebar
bind index <space> sidebar-open         # open selected folder from sidebar
# sidebar toggle
macro index ,@) "<enter-command> set sidebar_visible=no; macro index ~ ,@( 'Toggle sidebar'<Enter>"
macro index ,@( "<enter-command> set sidebar_visible=yes; macro index ~ ,@) 'Toggle sidebar'<Enter>"
macro index ~ ,@( 'Toggle sidebar'      # toggle the sidebar

set nm_query_window_timebase = 'month'
